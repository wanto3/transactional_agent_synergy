âœ… Loaded .env.local
ğŸš€ Starting Integration Test: Transactional Agent vs RailBridge Merchant
[Agent] [X402Client] ğŸš€ x402 Client setup complete with EVM scheme
ğŸ¯ Targeting: http://localhost:4021/api/premium
---------------------------------------------------
ğŸ“¡ Sending request (expecting 402 -> Payment -> 200)...
[Agent] [X402Client] ğŸ“¤ GET http://localhost:4021/api/premium
[Agent] [X402Client] ğŸ“‹ Available payment options: [{"scheme":"exact","network":"eip155:84532","amount":"100000","asset":"0x036CbD53842c5426634e7929541eC2318f3dCF7e","payTo":"0x1111111111111111111111111111111111111111","maxTimeoutSeconds":300,"extra":{"name":"USDC","version":"2"}}]
[Agent] [X402Client] âœ¨ Selected option: eip155:84532 (100000 0x036CbD53842c5426634e7929541eC2318f3dCF7e)
[Agent] [X402Client] âœï¸ Signing TYPED DATA...
[X402Client] âœï¸ Signing TYPED DATA...
[Agent] [X402Client] â„¹ï¸ Domain: {"name":"USDC","version":"2","chainId":84532,"verifyingContract":"0x036CbD53842c5426634e7929541eC2318f3dCF7e"}
[Agent] [X402Client] ğŸ“¥ Response Status: 200
[Agent] [X402Client] ğŸ” Searching for transaction hash on-chain...
[Agent] [X402Client] â³ Waiting 4s for RPC indexing...
[Agent] [X402Client] ğŸ” Trawling logs: From 0x7621106919A7485daF135C1EE0216AaFD1AD144D To 0x1111111111111111111111111111111111111111 Asset 0x036CbD53842c5426634e7929541eC2318f3dCF7e
[Agent] [X402Client] âœ… Found Transaction Hash: 0xa18209450000daf368b19044cd9d0d7072c83014ea2b1a8ca9d97504b31fe5fc
[Agent] [X402Client] ğŸ”— Explorer: https://sepolia.basescan.org/tx/0xa18209450000daf368b19044cd9d0d7072c83014ea2b1a8ca9d97504b31fe5fc
---------------------------------------------------
âœ… Response Status: 200
ğŸ“¦ Data: {
  "message": "You successfully paid for this premium content.",
  "data": {
    "timestamp": 1768897163255,
    "value": "premium-data",
    "transactionHash": "0xa18209450000daf368b19044cd9d0d7072c83014ea2b1a8ca9d97504b31fe5fc",
    "network": "eip155:84532"
  }
}
ğŸ‰ INTEGRATION SUCCESSFUL!
