âœ… Loaded .env.local
ğŸš€ Starting Integration Test: Transactional Agent vs RailBridge Merchant
[Agent] [X402Client] ğŸš€ x402 Client setup complete with EVM scheme
ğŸ¯ Targeting: http://localhost:4021/api/premium
---------------------------------------------------
ğŸ“¡ Sending request (expecting 402 -> Payment -> 200)...
[Agent] [X402Client] [Req:8271] ğŸ“¤ GET http://localhost:4021/api/premium
[Agent] [X402Client] [Req:8271] â±ï¸ Start Block: 36566493
[Agent] [X402Client] ğŸ“‹ Available payment options: [{"scheme":"exact","network":"eip155:84532","amount":"100000","asset":"0x036CbD53842c5426634e7929541eC2318f3dCF7e","payTo":"0x1111111111111111111111111111111111111111","maxTimeoutSeconds":300,"extra":{"name":"USDC","version":"2"}}]
[Agent] [X402Client] âœ¨ Selected option: eip155:84532 (100000 0x036CbD53842c5426634e7929541eC2318f3dCF7e)
[Agent] [X402Client] âœï¸ Signing TYPED DATA...
[X402Client] âœï¸ Signing TYPED DATA...
[Agent] [X402Client] â„¹ï¸ Domain: {"name":"USDC","version":"2","chainId":84532,"verifyingContract":"0x036CbD53842c5426634e7929541eC2318f3dCF7e"}
[Agent] [X402Client] ğŸ“¥ Response Status: 200
[Agent] [X402Client] ğŸ” Searching for transaction hash on-chain...
[Agent] [X402Client] [Req:8271] ğŸ”„ Attempt 1/10: Trawling logs...
[Agent] [X402Client] [Req:8271] âœ… Found FRESH Transaction Hash: 0xe1fbec2e9795424d31ca151456498668cedc4efb8033610ecc7894eecbea4d9e
[Agent] [X402Client] [Req:8271]    Log Block: 36566497, Start: 36566493
[Agent] [X402Client] [Req:8271] ğŸ”— Explorer: https://sepolia.basescan.org/tx/0xe1fbec2e9795424d31ca151456498668cedc4efb8033610ecc7894eecbea4d9e
---------------------------------------------------
âœ… Response Status: 200
ğŸ“¦ Data: {
  "message": "You successfully paid for this premium content.",
  "data": {
    "timestamp": 1768901276393,
    "value": "premium-data",
    "transactionHash": "0xe1fbec2e9795424d31ca151456498668cedc4efb8033610ecc7894eecbea4d9e",
    "network": "eip155:84532"
  }
}
ğŸ‰ INTEGRATION SUCCESSFUL!
