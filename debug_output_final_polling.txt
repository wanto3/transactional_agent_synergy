âœ… Loaded .env.local
ğŸš€ Starting Integration Test: Transactional Agent vs RailBridge Merchant
[Agent] [X402Client] ğŸš€ x402 Client setup complete with EVM scheme
ğŸ¯ Targeting: http://localhost:4021/api/premium
---------------------------------------------------
ğŸ“¡ Sending request (expecting 402 -> Payment -> 200)...
[Agent] [X402Client] ğŸ“¤ GET http://localhost:4021/api/premium
[Agent] [X402Client] â±ï¸ Start Block: 36565122
[Agent] [X402Client] ğŸ“‹ Available payment options: [{"scheme":"exact","network":"eip155:84532","amount":"100000","asset":"0x036CbD53842c5426634e7929541eC2318f3dCF7e","payTo":"0x1111111111111111111111111111111111111111","maxTimeoutSeconds":300,"extra":{"name":"USDC","version":"2"}}]
[Agent] [X402Client] âœ¨ Selected option: eip155:84532 (100000 0x036CbD53842c5426634e7929541eC2318f3dCF7e)
[Agent] [X402Client] âœï¸ Signing TYPED DATA...
[X402Client] âœï¸ Signing TYPED DATA...
[Agent] [X402Client] â„¹ï¸ Domain: {"name":"USDC","version":"2","chainId":84532,"verifyingContract":"0x036CbD53842c5426634e7929541eC2318f3dCF7e"}
[Agent] [X402Client] ğŸ“¥ Response Status: 200
[Agent] [X402Client] ğŸ” Searching for transaction hash on-chain...
[Agent] [X402Client] ğŸ”„ Attempt 1/10: Trawling logs...
[Agent] [X402Client] âœ… Found FRESH Transaction Hash: 0xa4b804a07c00de48de89cb82d9c94e7d36c0e99163b0bc51fe6c1f6bb3f01b0c
[Agent] [X402Client] ğŸ”— Explorer: https://sepolia.basescan.org/tx/0xa4b804a07c00de48de89cb82d9c94e7d36c0e99163b0bc51fe6c1f6bb3f01b0c
---------------------------------------------------
âœ… Response Status: 200
ğŸ“¦ Data: {
  "message": "You successfully paid for this premium content.",
  "data": {
    "timestamp": 1768898534665,
    "value": "premium-data",
    "transactionHash": "0xa4b804a07c00de48de89cb82d9c94e7d36c0e99163b0bc51fe6c1f6bb3f01b0c",
    "network": "eip155:84532"
  }
}
ğŸ‰ INTEGRATION SUCCESSFUL!
